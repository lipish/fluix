import{ac as I,ad as K,W as S,M as N,N as D,K as y,h as U,G as Y,U as q,ae as C,I as g,D as F,af as w,ag as G,ah as E,n as m,ai as $,aj as z,ak as W,p as Z,al as H,am as A,O as R,an as J,u as Q,l as V,ao as X,ap as k,aq as _,S as M,ar as B,as as ee,at as re}from"./CBCph-ZT.js";class fe{anchor;#r=new Map;#s=new Map;#e=new Map;#t=!0;constructor(e,t=!0){this.anchor=e,this.#t=t}#i=()=>{var e=I;if(this.#r.has(e)){var t=this.#r.get(e),s=this.#s.get(t);if(s)K(s);else{var i=this.#e.get(t);i&&(this.#s.set(t,i.effect),this.#e.delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[n,c]of this.#r){if(this.#r.delete(n),n===e)break;const a=this.#e.get(c);a&&(S(a.effect),this.#e.delete(c))}for(const[n,c]of this.#s){if(n===t)continue;const a=()=>{if(Array.from(this.#r.values()).includes(n)){var u=document.createDocumentFragment();q(c,u),u.append(D()),this.#e.set(n,{effect:c,fragment:u})}else S(c);this.#s.delete(n)};this.#t||!s?N(c,a,!1):a()}}};#n=e=>{this.#r.delete(e);const t=Array.from(this.#r.values());for(const[s,i]of this.#e)t.includes(s)||(S(i.effect),this.#e.delete(s))};ensure(e,t){var s=I,i=C();if(t&&!this.#s.has(e)&&!this.#e.has(e))if(i){var n=document.createDocumentFragment(),c=D();n.append(c),this.#e.set(e,{effect:y(()=>t(c)),fragment:n})}else this.#s.set(e,y(()=>t(this.anchor)));if(this.#r.set(s,e),i){for(const[a,o]of this.#s)a===e?s.skipped_effects.delete(o):s.skipped_effects.add(o);for(const[a,o]of this.#e)a===e?s.skipped_effects.delete(o.effect):s.skipped_effects.add(o.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else U&&(this.anchor=Y),this.#i()}}let b=!1;function se(r){var e=b;try{return b=!1,[r(),b]}finally{b=e}}const te={get(r,e){if(!r.exclude.includes(e))return m(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){if(!(e in r.special)){var s=g;try{R(r.parent_effect),r.special[e]=ne({get[e](){return r.props[e]}},e,E)}finally{R(s)}}return r.special[e](t),A(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),A(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function ce(r,e){return new Proxy({props:r,exclude:e,special:{},version:F(0),parent_effect:g},te)}const ie={get(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(_(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(r,e,t){let s=r.props.length;for(;s--;){let i=r.props[s];_(i)&&(i=i());const n=w(i,e);if(n&&n.set)return n.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(_(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const i=w(s,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===M||e===B)return!1;for(let t of r.props)if(_(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(_(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function oe(...r){return new Proxy({props:r},ie)}function ne(r,e,t,s){var i=!V||(t&X)!==0,n=(t&J)!==0,c=(t&ee)!==0,a=s,o=!0,u=()=>(o&&(o=!1,a=c?Q(s):s),a),d;if(n){var L=M in r||B in r;d=w(r,e)?.set??(L&&e in r?f=>r[e]=f:void 0)}var p,O=!1;n?[p,O]=se(()=>r[e]):p=r[e],p===void 0&&s!==void 0&&(p=u(),d&&(i&&G(),d(p)));var l;if(i?l=()=>{var f=r[e];return f===void 0?u():(o=!0,f)}:l=()=>{var f=r[e];return f!==void 0&&(a=void 0),f===void 0?a:f},i&&(t&E)===0)return l;if(d){var T=r.$$legacy;return(function(f,v){return arguments.length>0?((!i||!v||T||O)&&d(v?l():f),f):l()})}var P=!1,h=((t&k)!==0?Z:H)(()=>(P=!1,l()));n&&m(h);var j=g;return(function(f,v){if(arguments.length>0){const x=v?m(h):i&&n?$(f):f;return z(h,x),P=!0,a!==void 0&&(a=x),f}return re&&P||(j.f&W)!==0?h.v:m(h)})}export{fe as B,ce as l,ne as p,oe as s};
